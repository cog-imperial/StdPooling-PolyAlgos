GAMS 24.5.3  r54322 Released Oct  1, 2015 WEX-WEI x86 64bit/MS Windows 07/14/16 19:17:43 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


          Foulds3 pooling problem data.
          Author: Mohammed Alfaki, Wed Nov  9 15:36:08 2011
   5   
   7   
   8  # Declare sets
   9      set i    / 1*35 /;
  10      set s(i) / 1*11 /;
  11      set t(i) /20*35 /;
  12      set k    / 1*1  /;
  13   
  14  alias (i,j);
  15   
  16  # The arc unit cost c_{ij}
  17  table c(i,j)
  18           12      13      14      15      16      17      18      19      2
      0      21      22      23      24      25      26      27      28      29 
           30      31      32      33      34      35
  19    1    0.00    0.00    0.00    0.00    0.00    0.00    0.00   10.00    0.0
      0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00 
         0.00    0.00    0.00    0.00    0.00    0.00
  20    2    0.00    0.00    0.00    0.00    0.00    0.00   11.00   11.00    0.0
      0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00 
         0.00    0.00    0.00    0.00    0.00    0.00
  21    3    0.00    0.00    0.00    0.00    0.00   12.00   12.00   12.00    0.0
      0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00 
         0.00    0.00    0.00    0.00    0.00    0.00
  22    4    0.00    0.00    0.00    0.00   13.00   13.00   13.00   13.00    0.0
      0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00 
         0.00    0.00    0.00    0.00    0.00    0.00
  23    5    0.00    0.00    0.00   14.00   14.00   14.00   14.00    0.00    0.0
      0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00 
         0.00    0.00    0.00    0.00    0.00    0.00
  24    6    0.00    0.00   15.00   15.00   15.00   15.00    0.00    0.00    0.0
      0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00 
         0.00    0.00    0.00    0.00    0.00    0.00
  25    7    0.00   16.00   16.00   16.00   16.00    0.00    0.00    0.00    0.0
      0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00 
         0.00    0.00    0.00    0.00    0.00    0.00
  26    8   17.00   17.00   17.00   17.00    0.00    0.00    0.00    0.00    0.0
      0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00 
         0.00    0.00    0.00    0.00    0.00    0.00
  27    9   18.00   18.00   18.00    0.00    0.00    0.00    0.00    0.00    0.0
      0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00 
         0.00    0.00    0.00    0.00    0.00    0.00
  28   10   19.00   19.00    0.00    0.00    0.00    0.00    0.00    0.00    0.0
      0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00 
         0.00    0.00    0.00    0.00    0.00    0.00
  29   11   20.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.0
      0    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00 
         0.00    0.00    0.00    0.00    0.00    0.00
  30   12    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  -20.0
      0  -19.50  -19.00  -18.50  -18.00  -17.50  -17.00  -16.50  -16.00  -15.50 
       -15.00  -14.50  -14.00  -13.50  -13.00  -12.50
  31   13    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  -20.0
      0  -19.50  -19.00  -18.50  -18.00  -17.50  -17.00  -16.50  -16.00  -15.50 
       -15.00  -14.50  -14.00  -13.50  -13.00  -12.50
  32   14    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  -20.0
      0  -19.50  -19.00  -18.50  -18.00  -17.50  -17.00  -16.50  -16.00  -15.50 
       -15.00  -14.50  -14.00  -13.50  -13.00  -12.50
  33   15    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  -20.0
      0  -19.50  -19.00  -18.50  -18.00  -17.50  -17.00  -16.50  -16.00  -15.50 
       -15.00  -14.50  -14.00  -13.50  -13.00  -12.50
  34   16    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  -20.0
      0  -19.50  -19.00  -18.50  -18.00  -17.50  -17.00  -16.50  -16.00  -15.50 
       -15.00  -14.50  -14.00  -13.50  -13.00  -12.50
  35   17    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  -20.0
      0  -19.50  -19.00  -18.50  -18.00  -17.50  -17.00  -16.50  -16.00  -15.50 
       -15.00  -14.50  -14.00  -13.50  -13.00  -12.50
  36   18    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  -20.0
      0  -19.50  -19.00  -18.50  -18.00  -17.50  -17.00  -16.50  -16.00  -15.50 
       -15.00  -14.50  -14.00  -13.50  -13.00  -12.50
  37   19    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  -20.0
      0  -19.50  -19.00  -18.50  -18.00  -17.50  -17.00  -16.50  -16.00  -15.50 
       -15.00  -14.50  -14.00  -13.50  -13.00  -12.50 ;
  38   
  39  # The adjacency matrix (the arcs set A)
  40  table a(i,j)
  41       12  13  14  15  16  17  18  19  20  21  22  23  24  25  26  27  28  2
      9  30  31  32  33  34  35
  42    1   0   0   0   0   0   0   0   1   0   0   0   0   0   0   0   0   0   
      0   0   0   0   0   0   0
  43    2   0   0   0   0   0   0   1   1   0   0   0   0   0   0   0   0   0   
      0   0   0   0   0   0   0
  44    3   0   0   0   0   0   1   1   1   0   0   0   0   0   0   0   0   0   
      0   0   0   0   0   0   0
  45    4   0   0   0   0   1   1   1   1   0   0   0   0   0   0   0   0   0   
      0   0   0   0   0   0   0
  46    5   0   0   0   1   1   1   1   0   0   0   0   0   0   0   0   0   0   
      0   0   0   0   0   0   0
  47    6   0   0   1   1   1   1   0   0   0   0   0   0   0   0   0   0   0   
      0   0   0   0   0   0   0
  48    7   0   1   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   
      0   0   0   0   0   0   0
  49    8   1   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   
      0   0   0   0   0   0   0
  50    9   1   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   
      0   0   0   0   0   0   0
  51   10   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   
      0   0   0   0   0   0   0
  52   11   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   
      0   0   0   0   0   0   0
  53   12   0   0   0   0   0   0   0   0   1   1   1   1   1   1   1   1   1   
      1   1   1   1   1   1   1
  54   13   0   0   0   0   0   0   0   0   1   1   1   1   1   1   1   1   1   
      1   1   1   1   1   1   1
  55   14   0   0   0   0   0   0   0   0   1   1   1   1   1   1   1   1   1   
      1   1   1   1   1   1   1
  56   15   0   0   0   0   0   0   0   0   1   1   1   1   1   1   1   1   1   
      1   1   1   1   1   1   1
  57   16   0   0   0   0   0   0   0   0   1   1   1   1   1   1   1   1   1   
      1   1   1   1   1   1   1
  58   17   0   0   0   0   0   0   0   0   1   1   1   1   1   1   1   1   1   
      1   1   1   1   1   1   1
  59   18   0   0   0   0   0   0   0   0   1   1   1   1   1   1   1   1   1   
      1   1   1   1   1   1   1
  60   19   0   0   0   0   0   0   0   0   1   1   1   1   1   1   1   1   1   
      1   1   1   1   1   1   1 ;
  61   
  62  # Source qualities/terminal quality upper bounds
  63  table q(i,k)
  64            1
  65    1    2.00
  66    2    1.90
  67    3    1.80
  68    4    1.70
  69    5    1.60
  70    6    1.50
  71    7    1.40
  72    8    1.30
  73    9    1.20
  74   10    1.10
  75   11    1.00
  76   20    1.05
  77   21    1.10
  78   22    1.15
  79   23    1.20
  80   24    1.25
  81   25    1.30
  82   26    1.35
  83   27    1.40
  84   28    1.45
  85   29    1.50
  86   30    1.55
  87   31    1.60
  88   32    1.65
  89   33    1.70
  90   34    1.75
  91   35    1.80 ;
  92   
  93  # Node capacity lower bound
  94  parameter bl(i) /  1     0.00
  95                     2     0.00
  96                     3     0.00
  97                     4     0.00
  98                     5     0.00
  99                     6     0.00
 100                     7     0.00
 101                     8     0.00
 102                     9     0.00
 103                    10     0.00
 104                    11     0.00
 105                    20     0.00
 106                    21     0.00
 107                    22     0.00
 108                    23     0.00
 109                    24     0.00
 110                    25     0.00
 111                    26     0.00
 112                    27     0.00
 113                    28     0.00
 114                    29     0.00
 115                    30     0.00
 116                    31     0.00
 117                    32     0.00
 118                    33     0.00
 119                    34     0.00
 120                    35     0.00 / ;
 121   
 122  # Node capacity upper bound
 123  parameter bu(i) /  1    16.00
 124                     2    16.00
 125                     3    16.00
 126                     4    16.00
 127                     5    16.00
 128                     6    16.00
 129                     7    16.00
 130                     8    16.00
 131                     9    16.00
 132                    10    16.00
 133                    11    16.00
 134                    12    16.00
 135                    13    16.00
 136                    14    16.00
 137                    15    16.00
 138                    16    16.00
 139                    17    16.00
 140                    18    16.00
 141                    19    16.00
 142                    20     1.00
 143                    21     1.00
 144                    22     1.00
 145                    23     1.00
 146                    24     1.00
 147                    25     1.00
 148                    26     1.00
 149                    27     1.00
 150                    28     1.00
 151                    29     1.00
 152                    30     1.00
 153                    31     1.00
 154                    32     1.00
 155                    33     1.00
 156                    34     1.00
 157                    35     1.00 / ;
 158   
INCLUDE    I:\OneDrive for Business 1\PhD Radu\Ruth-MILP\Python\Pooling\Pooling\
           pqmodel.gms
          File name: pqmodel.gms.
          Author: Mohammed Alfaki, December, 2010.
          GAMS model for the PQ-formulation.
 165   
 166  *=========================================================================
      ======
 167  # Declare options
 168  *=========================================================================
      ======
 169  *options optcr=0.01, limrow=0, limcol=0, reslim=3600;
 170  options optcr=1.e-9, optca=1.e-6, limrow=0, limcol=0, reslim=3600;
 171  #=========================================================================
      ======
 172  # Declare sets
 173  #=========================================================================
      ======
 174       set l(i);
 175  l(i) = i(i)-s(i)-t(i);
 176   
 177  #=========================================================================
      ======
 178  # Declare variables/bounds
 179  #=========================================================================
      ======
 180  variables cost, profit;
 181  positive variables y(s,i), f(i,t), x(s,i,t);
 182   
 183  y.up(s,i) = a(s,i);
 184  f.up(i,t) = min(bu(i),bu(t))*a(i,t);
 185  x.up(s,i,t) = min(bu(s),bu(i),bu(t))*a(s,i)*a(i,t);
 186   
 187  #=========================================================================
      ======
 188  # Declare constraints
 189  #=========================================================================
      ======
 190  equations obj, sflowcaplb(s), sflowcapub(s), pflowcap(i), tflowcaplb(t),
 191            tflowcapub(t), qualub(t,k), propblnc(i), rlt1(i,t), rlt2(s,j),
 192            pathdef(s,i,t);
 193   
 194  #=========================================================================
      ======
 195  # Define constraints
 196  #=========================================================================
      ======
 197  #-----------------------------Objective function--------------------------
      ------
 198  obj.. cost =e= sum((s,l,t)$(a(s,l)*a(l,t)>0),(c(s,l) + c(l,t))*x(s,l,t)) +
 199                                       sum((s,t)$(a(s,t)>0), c(s,t)*f(s,t));
 200  #-------------------------Raw material availabilities---------------------
      ------
 201  sflowcaplb(s)$(bl(s)>0).. sum((l,t)$(a(s,l)*a(l,t)>0), x(s,l,t)) +
 202                                sum(t$(a(s,t)>0), f(s,t)) =g= bl(s);
 203  sflowcapub(s)$(bu(s)<+inf).. sum((l,t)$(a(s,l)*a(l,t)>0), x(s,l,t)) +
 204                                   sum(t$(a(s,t)>0), f(s,t)) =l= bu(s);
 205  #-------------------------------Pool capacities---------------------------
      ------
 206  pflowcap(l)$(bu(l)<+inf).. sum((s,t)$(a(s,l)*a(l,t)>0), x(s,l,t)) =l= bu(l
      );
 207  #-------------------------Product demand restrictions---------------------
      ------
 208  tflowcaplb(t)$(bl(t)>0).. sum((s,l)$(a(s,l)*a(l,t)>0), x(s,l,t)) +
 209                                sum(s$(a(s,t)>0), f(s,t)) =g= bl(t);
 210  tflowcapub(t)$(bu(t)<+inf).. sum((s,l)$(a(s,l)*a(l,t)>0), x(s,l,t)) +
 211                                   sum(s$(a(s,t)>0), f(s,t)) =l= bu(t);
 212  #------------------------Product quality specifications-------------------
      ------
 213  qualub(t,k)$(abs(q(t,k))>0 and abs(q(t,k))<+inf)..
 214                    sum((l,s)$(a(s,l)*a(l,t)>0), (q(s,k) - q(t,k))*x(s,l,t))
       +
 215                             sum(s$(a(s,t)>0), (q(s,k) - q(t,k))*f(s,t)) =l=
       0;
 216  #------------------------------Proportion balances------------------------
      ------
 217  propblnc(l).. sum(s$(a(s,l)>0), y(s,l)) =e= 1;
 218  #--------------------------RLT for proportion balances--------------------
      ------
 219  rlt1(l,t)$(a(l,t)>0).. sum(s$(a(s,l)>0), x(s,l,t)) =e= f(l,t);
 220  #----------------------------RLT for pool capacities----------------------
      ------
 221  rlt2(s,l)$(a(s,l)>0 and bu(l)<+inf)..
 222                                    sum(t$(a(l,t)>0), x(s,l,t)) =l= bu(l)*y(
      s,l);
 223  #-----------------------------path flow definition------------------------
      ------
 224  pathdef(s,l,t)$(a(s,l)*a(l,t)>0).. x(s,l,t) =e= y(s,l)*f(l,t);
 225   
 226  #=========================================================================
      ======
 227  # Solve the model
 228  #=========================================================================
      ======
 229  option nlp = baron;
 230  model pqmodel /all/;
 237  *rlt1.equclass('*','*') 1
 238  *rlt2.equclass('*','*') 1
 239  pqmodel.optfile = 1;
 240  pqmodel.solprint = 2;
 241  pqmodel.workspace = 1500;
 242  solve pqmodel minimizing cost using nlp;
 243  #============================Print solution information===================
      ======
 244  scalar nlts;
 245  nlts = 0;
 246  loop((s,l,j)$(a(s,l)*a(l,j)>0),
 247    nlts = nlts + 1;
 248  );
 249  scalars ae, re;
 250  ae = abs(pqmodel.objest - pqmodel.objval);
 251  re = ae/abs(pqmodel.objest);
 252  profit.lo = pqmodel.objest;
 253  profit.up = pqmodel.objval;
 254  file line;
 255  put_utility line 'msg' / '#####' ' Solution Summary #####';
 256  line.nd = 6;
 257  line.nw = 18;
 258  put_utility line 'msg' / pqmodel.objval pqmodel.objest pqmodel.resusd re a
      e;
 259  line.nd = 0;
 260  put_utility line 'msg' / pqmodel.solvestat pqmodel.nodusd (pqmodel.numvar-
      1)
 261  nlts (pqmodel.numequ-nlts-1) nlts;
 262  option f:6:0:2;display f.l;
 263  option y:6:0:2;display y.l;
 264  #========================================END==============================
      ======
GAMS 24.5.3  r54322 Released Oct  1, 2015 WEX-WEI x86 64bit/MS Windows 07/14/16 19:17:43 Page 2
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  I:\OneDrive for Business 1\PhD Radu\Ru
                                          th-MILP\Python\Pooling\Pooling\Foulds3
                                          .gms
     2      159 INCLUDE        1     159  .I:\OneDrive for Business 1\PhD Radu\R
                                           uth-MILP\Python\Pooling\Pooling\pqmod
                                           el.gms


COMPILATION TIME     =        0.000 SECONDS      3 MB  24.5.3 r54322 WEX-WEI
GAMS 24.5.3  r54322 Released Oct  1, 2015 WEX-WEI x86 64bit/MS Windows 07/14/16 19:17:43 Page 4
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
E x e c u t i o n


##### Solution Summary #####
-8.000000         -8.000000          0.180000          0.000000          0.00000
                                                                               0
1                 0               672               512               219       
                                                                             512

----    262 VARIABLE f.L  

12.20 1.000000,    12.21 0.930496
12.22 0.785022,    12.23 0.788625
12.24 0.585573,    12.25 0.273364
12.26 0.394247,    12.27 0.205409
12.28 0.447530,    12.29 0.379311
12.30 0.405731,    12.31 0.234194
12.32 0.362875,    12.33 0.310666
12.34 0.258457,    12.35 0.112989
13.21 0.017451,    13.23 0.008799
13.25 0.722578,    13.28 0.002289
13.29 0.000987,    13.30 0.005384
13.31 0.017466,    13.32 0.004779
13.33 0.003974,    13.34 0.003170
13.35 0.000705,    14.22 0.201888
14.27 0.794591,    14.32 0.000885
14.33 0.000742,    14.34 0.000599
15.24 0.414427,    15.26 0.584652
17.23 0.202576,    17.25 0.004058
17.28 0.550181,    17.29 0.619702
17.31 0.739827,    18.21 0.052053
18.22 0.013089,    18.26 0.021101
18.30 0.588884,    18.31 0.008513
18.35 0.886306,    19.32 0.631461
19.33 0.684618,    19.34 0.737775


----    263 VARIABLE y.L  

1 .19 0.989909,    2 .18 0.986457
3 .17 0.918703,    4 .16 1.000000
4 .19 0.010091,    5 .15 0.743640
5 .18 0.013543,    6 .14 0.965993
6 .17 0.081297,    7 .13 0.971101
7 .15 0.095022,    8 .12 0.135441
8 .14 0.006801,    8 .15 0.161338
9 .13 0.005780,    9 .14 0.027206
10.12 0.093678,    10.13 0.023119
11.12 0.770881


**** REPORT FILE SUMMARY

line I:\OneDrive for Business 1\PhD Radu\Ruth-MILP\Python\Pooling\Pooling\line.p
     ut


EXECUTION TIME       =        0.015 SECONDS      3 MB  24.5.3 r54322 WEX-WEI


USER: Ruth Misener                                   G160314/0001AB-GEN
      ANTIGONE Development License                               DC0000
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      I:\OneDrive for Business 1\PhD Radu\Ruth-MILP\Python\Pooling\Pooling\
           Foulds3.gms
Output     I:\OneDrive for Business 1\PhD Radu\Ruth-MILP\Python\Pooling\Pooling\
           Foulds3.lst
